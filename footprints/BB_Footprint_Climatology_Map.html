<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Add a polygon to a map using a GeoJSON source</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<!-- Import Turf Module - Needed to calculate bounding boxes -->
<script src='https://api.mapbox.com/mapbox.js/plugins/turf/v2.0.2/turf.min.js'></script>
<style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }

    /* Control the zoom to button */
    .btn-control {
        font: bold 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        background-color: #3386c0;
        color: #fff;
        position: absolute;
        top: 20px;
        left: 50%;
        z-index: 1;
        border: none;
        width: 200px;
        margin-left: -100px;
        display: block;
        cursor: pointer;
        padding: 10px 20px;
        border-radius: 3px;
    }
    .btn-control:hover {
        background-color: #4ea0da;
    }
</style>
</head>
<body>
<button id="zoomto" class="btn-control">Zoom to Footprint</button>
<div id="map"></div>
<script>
	// Replace access token!
    mapboxgl.accessToken = 'pk.eyJ1IjoidWJjbWljcm9tZXQiLCJhIjoiY2xmMnJzYzlnMGFsYTNxcW1kYWhubjBiaSJ9.rhIOVatxQoS4M__qIFv6Pg';
  
    //  Custom mapStyle lest us use ESRI raster tiles
    const mapStyle = {
        version: 8,
        sources: {
        worldImagery: {
            type: "raster",
            tiles: ["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],
            tileSize: 256
            }
        },
        layers: [{
            id: "worldImagery",
            type: "raster",
            source: "worldImagery",
            minzoom: 0,
            maxzoom: 22
            }
        ]
    };

    //  Create the map - zoom and center are "arbitrary"
    const map = new mapboxgl.Map({
                container: 'map',
                zoom: 10,
                center: [-122.984902, 49.129344], // starting position
                style: mapStyle,
                });

    //  Locate the user
    var geolocate = new mapboxgl.GeolocateControl({
        positionOptions: {
        enableHighAccuracy: true
        },
        trackUserLocation: true,
        showUserHeading: true},);

    map.addControl(geolocate);
    map.addControl(new mapboxgl.NavigationControl());  

    var FP_Contour_Levels = {"type": "FeatureCollection", "features": [{"id": "2", "type": "Feature", "properties": {"r": 0.9, "r_true": 0.9000051307017463, "Contour_Level": "90 % Flux Source Area Contour"}, "geometry": {"type": "Polygon", "coordinates": [[[-122.98466873197407, 49.12861135632935], [-122.9846412630586, 49.12860956542846], [-122.98461379366913, 49.128609312790296], [-122.98458632377859, 49.12861067743549], [-122.98455885334836, 49.12861377516845], [-122.98455832918951, 49.12861386579398], [-122.98453138244223, 49.128618391755374], [-122.98450391093152, 49.12862493188644], [-122.98448162334617, 49.12863188239364], [-122.98447643878383, 49.12863348930315], [-122.98444896606281, 49.128643849585906], [-122.98443563468479, 49.12864990308721], [-122.98442149262983, 49.1286564457781], [-122.98440038354273, 49.12866792521365], [-122.98439401840852, 49.12867150944773], [-122.98437151737159, 49.12868594819372], [-122.98436654331277, 49.128689301442705], [-122.98434680843928, 49.1287039717302], [-122.98433906726073, 49.12871006725701], [-122.98432483330447, 49.12872199563252], [-122.98431159026653, 49.12873374651058], [-122.98430472014606, 49.12874001978372], [-122.98428583421526, 49.128758044098426], [-122.98428411251821, 49.12875972891362], [-122.98426736600923, 49.12877606846688], [-122.98425663431442, 49.12878705906996], [-122.98424967772551, 49.12879409293872], [-122.9842325937209, 49.12881211749033], [-122.98422915560448, 49.12881588990742], [-122.98421601836388, 49.128830142108875], [-122.98420167610527, 49.1288471045876], [-122.98420077029246, 49.12884816690664], [-122.98418614941554, 49.12886619178822], [-122.98417419514988, 49.1288827860689], [-122.98417315173077, 49.12888421689042], [-122.98416076570044, 49.12890224207501], [-122.98414972404042, 49.12892026744277], [-122.98414671192103, 49.12892547449496], [-122.98413899451668, 49.12893829285232], [-122.98412856029854, 49.12895631830138], [-122.98411922724759, 49.12897253825425], [-122.98411811229671, 49.128974343747565], [-122.98410604591939, 49.12899236896996], [-122.98409294115112, 49.129010394048], [-122.98409174500055, 49.12901185518788], [-122.98407700061456, 49.12902841873344], [-122.98406426574256, 49.12904171005638], [-122.98405942012445, 49.12904644319022], [-122.98404014460982, 49.129064467409975], [-122.98403678774778, 49.12906752731647], [-122.9840196809567, 49.12908249146202], [-122.98400931031414, 49.12909151105357], [-122.98399853843978, 49.12910051541628], [-122.98398183326353, 49.129114223423606], [-122.98397635817949, 49.12911853922262], [-122.9839543566747, 49.129135427026306], [-122.98395282266705, 49.129136562836294], [-122.98392777093116, 49.129154586234044], [-122.98392688052337, 49.12915520466262], [-122.98390111417757, 49.129172609402524], [-122.98389940475768, 49.129173723864746], [-122.98387297575138, 49.12919063235785], [-122.98387192927296, 49.12919131367277], [-122.98384526861501, 49.12920865536661], [-122.98384445364833, 49.12920927429744], [-122.98382171809531, 49.12922667895118], [-122.98381697657867, 49.12923161380582], [-122.98380427993358, 49.12924470338843], [-122.98379172236825, 49.12926272850823], [-122.98378949535906, 49.129266606927644], [-122.98378090348287, 49.12928075387088], [-122.98377114174507, 49.12929877938105], [-122.98376265215833, 49.12931680506926], [-122.98376200859404, 49.12931846238035], [-122.98375519324767, 49.1293348309018], [-122.98374960954318, 49.12935285699773], [-122.98374594295305, 49.12937088336327], [-122.98374415868452, 49.129388909993644], [-122.98374426660756, 49.12940693689036], [-122.98374629320556, 49.12942496405713], [-122.98375022217385, 49.12944299149156], [-122.98375589458183, 49.129461019171124], [-122.98376195695363, 49.129476591577216], [-122.98376285215889, 49.129479047031076], [-122.98377017090871, 49.12949707494133], [-122.98377846838139, 49.12951510298858], [-122.98378888751742, 49.12953313133306], [-122.98378940824514, 49.12953381237534], [-122.98380277557915, 49.12955116016327], [-122.98381686852507, 49.12956361049554], [-122.98382353549947, 49.129569189954715], [-122.98384433249912, 49.12958214038824], [-122.98385323911268, 49.12958722099348], [-122.98387179798193, 49.129596081964856], [-122.98389293556059, 49.12960525341904], [-122.98389926420228, 49.1296077934825], [-122.98392673081766, 49.1296183229202], [-122.98394056707556, 49.129623286934844], [-122.98395419768079, 49.129628120706876], [-122.98398166473791, 49.12963734991743], [-122.98399414949591, 49.12964132125606], [-122.98400913195285, 49.12964612011589], [-122.98403659932829, 49.129654420611374], [-122.9840540990463, 49.12965935643189], [-122.98406406686726, 49.129662239378554], [-122.98409153449171, 49.12966981812465], [-122.98411900235291, 49.12967668174933], [-122.98412199196277, 49.12967739266916], [-122.98414647025406, 49.12968344382583], [-122.98417393839225, 49.12968948469257], [-122.98420140679205, 49.12969472311985], [-122.98420551116696, 49.12969543100517], [-122.98422887528301, 49.12969969252466], [-122.9842563439823, 49.129704021266484], [-122.98428381288912, 49.12970770850003], [-122.98431128197592, 49.12971083829422], [-122.98433875122115, 49.12971347603565], [-122.98433875122115, 49.12971347603565], [-122.98436622048976, 49.129716048698114], [-122.9843936899221, 49.12971810874981], [-122.98442115952895, 49.12971961917324], [-122.98444862932553, 49.129720528198895], [-122.9844760993281, 49.129720780695116], [-122.98450356955081, 49.129720327775985], [-122.98453104000141, 49.12971914076953], [-122.98455851067824, 49.12971722096969], [-122.98458598157322, 49.12971459072545], [-122.98459503792263, 49.12971351051469], [-122.98461345254502, 49.129711702744146], [-122.98464092360726, 49.12970851167708], [-122.98466839482747, 49.129704796911646], [-122.98469586621681, 49.12970051926411], [-122.98472333778913, 49.12969563062727], [-122.9847240120964, 49.129695500770254], [-122.98475080922128, 49.12969118143187], [-122.98477828085058, 49.129686072224224], [-122.98480575274873, 49.12968006483251], [-122.98481610198013, 49.129677486036975], [-122.98483322469852, 49.12967386623773], [-122.98486069675909, 49.12966728135621], [-122.98488816889997, 49.1296604082526], [-122.9848924234568, 49.12965946916803], [-122.98491564051784, 49.129655234100035], [-122.98494311142416, 49.12965239088631], [-122.9849705813867, 49.129652659490795], [-122.98499805075562, 49.12965489670059], [-122.98502551966368, 49.12965867230937], [-122.98503031169123, 49.12965948712803], [-122.98505298805163, 49.129664192077485], [-122.98508045643771, 49.12966973832749], [-122.98510792510125, 49.129674378668106], [-122.98513177209709, 49.12967752711878], [-122.9851353940358, 49.129678129618235], [-122.98516286305208, 49.12968162053713], [-122.98519033235658, 49.12968415663092], [-122.98521780185064, 49.12968606474017], [-122.98524527145116, 49.129687621019144], [-122.9852727411045, 49.12968900491074], [-122.98530021078464, 49.12969030320475], [-122.98532768048095, 49.12969155159982], [-122.9853551501958, 49.12969274173306], [-122.98538261994544, 49.129693817985256], [-122.98541008974777, 49.12969471879003], [-122.98543755961622, 49.129695397189906], [-122.98545079925916, 49.1296955946412], [-122.98546502955007, 49.129695854370624], [-122.98549249958005, 49.12969598382272], [-122.98551996973013, 49.12969570141195], [-122.98552367182899, 49.129695603800975], [-122.98554743999372, 49.12969502734934], [-122.98557491039891, 49.1296938626948], [-122.98560238097686, 49.129692096981046], [-122.98562985175825, 49.12968962053674], [-122.98565732277572, 49.12968631616215], [-122.98568479406231, 49.129682064404435], [-122.9857081758629, 49.12967759990612], [-122.98571226563891, 49.12967678694983], [-122.98573973748641, 49.12967054464367], [-122.98576720970202, 49.12966299228563], [-122.98577826121367, 49.129659581679526], [-122.98579468228768, 49.12965411545843], [-122.98582215530952, 49.129643674486005], [-122.98582729134476, 49.1296415608277], [-122.98584962886895, 49.12963130387821], [-122.98586491363305, 49.129623538558974], [-122.98587710313744, 49.12961638878587], [-122.98589434776221, 49.129605515277866], [-122.98590457843811, 49.12959777453577], [-122.9859175589818, 49.12958749123038], [-122.98593205542598, 49.12957312416758], [-122.98593566808944, 49.12956946655678], [-122.98595000279077, 49.12955144142104], [-122.98595953609757, 49.129535331977685], [-122.98596068946226, 49.12953341583994], [-122.98596898035865, 49.129515389966684], [-122.98597467749275, 49.129497363777716], [-122.98597818572954, 49.129479337322614], [-122.98597979838722, 49.12946131063718], [-122.98597972488095, 49.12944328374692], [-122.98597811020733, 49.12942525666946], [-122.98597504970466, 49.1294072294163], [-122.98597060007282, 49.12938920199423], [-122.9859647862516, 49.129371174406096], [-122.98595958615746, 49.12935805016728], [-122.985957792179, 49.12935314667407], [-122.98595001921164, 49.12933511884679], [-122.9859409046217, 49.12931709085558], [-122.9859321321268, 49.129302026620636], [-122.9859305130553, 49.129299062707986], [-122.98591949185104, 49.1292810344826], [-122.98590678249843, 49.12926300605008], [-122.9859046741069, 49.129260293936746], [-122.98589329056576, 49.129244977520486], [-122.98587790681619, 49.12922694875789], [-122.98587721396417, 49.12922619747268], [-122.98586182609316, 49.12920891990783], [-122.98584975259502, 49.12919654283407], [-122.98584444538469, 49.1291908908961], [-122.98582698371214, 49.12917286187177], [-122.9858222909403, 49.12916800467254], [-122.98581015887726, 49.12915483292299], [-122.98579482953085, 49.12913871829902], [-122.98579306440513, 49.12913680393855], [-122.9857747050996, 49.129118774795664], [-122.98576736718144, 49.12911282867215], [-122.98575167707727, 49.12910074507377], [-122.98573990303268, 49.12909331296258], [-122.98572174016732, 49.12908271449305], [-122.98571243773208, 49.12907788086594], [-122.98568503426986, 49.129064683065444], [-122.98568497181357, 49.12906465432074], [-122.98565750563465, 49.12905238120126], [-122.98564351332494, 49.129046651027515], [-122.98563003914052, 49.1290412457266], [-122.98560257234776, 49.12903118408984], [-122.98559498742922, 49.129028618100854], [-122.98557510534472, 49.1290218856003], [-122.98554763809506, 49.12901347096629], [-122.98553764058101, 49.129010584049155], [-122.98552017078991, 49.129005278741836], [-122.98549270343551, 49.128997286350064], [-122.98547597682366, 49.12899254942595], [-122.98546523610088, 49.128989256598345], [-122.98543776890108, 49.1289807966858], [-122.98541722438534, 49.12897451513751], [-122.98541030174775, 49.12897221038324], [-122.98538283489366, 49.12896263824418], [-122.98536603869056, 49.12895648177842], [-122.98535536831311, 49.12895217339409], [-122.98532790225202, 49.12893998713879], [-122.98532484443008, 49.128938449666954], [-122.98530043705195, 49.128924933948284], [-122.98529318564037, 49.12892041875571], [-122.98527297276473, 49.12890685480774], [-122.9852668703583, 49.128902388517716], [-122.98524550925079, 49.128886236990084], [-122.98524309546112, 49.12888435859839], [-122.98521989329943, 49.128866328747414], [-122.98521804597192, 49.128864904943654], [-122.98519566196026, 49.128848298759785], [-122.98519058240012, 49.128844635604736], [-122.98516959492154, 49.1288302685312], [-122.98516311839064, 49.1288259081339], [-122.98514196570878, 49.12881223809569], [-122.98513565410605, 49.12880817017072], [-122.98511330948412, 49.128794207521075], [-122.98510818967307, 49.128790993021596], [-122.98508377286647, 49.128776176825575], [-122.98508072510995, 49.12877431289786], [-122.98505326039032, 49.128758214701826], [-122.98505313850318, 49.12875814598035], [-122.98502579557558, 49.12874249138328], [-122.98502142141315, 49.12874011498646], [-122.98499833061192, 49.12872731927782], [-122.98498834441651, 49.128722083807034], [-122.98497086550012, 49.12871269275035], [-122.98495376471602, 49.12870405242223], [-122.98494340022448, 49.128698660605], [-122.98491726735736, 49.12868602077652], [-122.98491593474421, 49.12868535407489], [-122.98488846914731, 49.128672479736544], [-122.98487776611302, 49.12866798872581], [-122.98486100325479, 49.12866062306924], [-122.984833536974, 49.12865008235815], [-122.98483316202912, 49.12864995599136], [-122.98480607048661, 49.1286402557692], [-122.98477860350118, 49.12863209164466], [-122.98477791858416, 49.12863192183738], [-122.9847511362676, 49.12862476613699], [-122.98472366857536, 49.12861895991465], [-122.98469620044963, 49.12861458298513], [-122.98468978774886, 49.12861388330063], [-122.98466873197407, 49.12861135632935]]]}}, {"id": "1", "type": "Feature", "properties": {"r": 0.75, "r_true": 0.7500438075109439, "Contour_Level": "75 % Flux Source Area Contour"}, "geometry": {"type": "Polygon", "coordinates": [[[-122.98480594666121, 49.129045486093254], [-122.9847784767177, 49.12904625396704], [-122.98477619780634, 49.12904653992556], [-122.98475100605674, 49.12904935841669], [-122.98472353448143, 49.129055427797255], [-122.98469809208427, 49.12906455648312], [-122.98469606173701, 49.129065273922684], [-122.9846685879992, 49.12907830667079], [-122.98466152579168, 49.129082578513696], [-122.98464111285175, 49.12909585628406], [-122.98463478831123, 49.12910060184105], [-122.98461363621432, 49.12911815828519], [-122.9846131039216, 49.129118625835694], [-122.98459342677073, 49.12913665009406], [-122.98458615844926, 49.129144018347205], [-122.9845754128868, 49.12915467457123], [-122.98455867977964, 49.12917269921683], [-122.98455867977964, 49.12917269921683], [-122.98454058772808, 49.129190723678], [-122.98453120127137, 49.12920075957067], [-122.98452317490238, 49.12920874822733], [-122.98450663840883, 49.12922677289158], [-122.98450372230502, 49.12923019023618], [-122.98448996607522, 49.129244797535144], [-122.98447624290606, 49.12926090229313], [-122.98447442282115, 49.12926282232808], [-122.98445826728975, 49.12928084703645], [-122.98444876231386, 49.12929532105203], [-122.98444615918211, 49.129298872287826], [-122.98443776940076, 49.12931689803911], [-122.98443320567542, 49.12933492430563], [-122.98443139324783, 49.12935295094293], [-122.98443201236546, 49.12937097790805], [-122.9844348553766, 49.12938900517292], [-122.98444045130184, 49.129407032808686], [-122.9844487228129, 49.129421619607626], [-122.98445054616408, 49.129425061050114], [-122.98446799478988, 49.12944309028008], [-122.9844761843036, 49.12944860667653], [-122.98449649472045, 49.12946112099183], [-122.9845036491962, 49.12946477382334], [-122.98453111520257, 49.12947741831389], [-122.98453535012206, 49.12947915308395], [-122.98455858187532, 49.12948796195076], [-122.98458604937142, 49.12949588724403], [-122.98459161926851, 49.12949718748818], [-122.98461351730445, 49.12950242882183], [-122.98464098580172, 49.129507167165315], [-122.98466845482018, 49.12951023221232], [-122.98469592424723, 49.12951198067283], [-122.9847233940273, 49.129512586501654], [-122.9847508641123, 49.129512200179185], [-122.98477833453262, 49.129510717067404], [-122.9848058053672, 49.12950787297594], [-122.98483327692172, 49.129502658396476], [-122.98485340765008, 49.12949722212782], [-122.98486074899154, 49.129495732413574], [-122.98488822025382, 49.12949143830751], [-122.98491569017838, 49.12949153809759], [-122.98494315884923, 49.12949577846747], [-122.98495156201149, 49.12949723496254], [-122.98497062698661, 49.129501799170015], [-122.98499809525187, 49.12950741810173], [-122.98502556424742, 49.12951063267432], [-122.98505303382967, 49.12951190746235], [-122.9850805038239, 49.12951181379894], [-122.98510797413897, 49.12951064858243], [-122.98513544475341, 49.129508477677554], [-122.98516291578967, 49.12950488512592], [-122.98519038739484, 49.12949936913038], [-122.98519861625255, 49.12949726689815], [-122.98521785952238, 49.12949207551238], [-122.98524533253189, 49.129481782604145], [-122.98525107473311, 49.129479246729964], [-122.98527280668881, 49.12946757727313], [-122.98528306984542, 49.12946122393136], [-122.98530028270355, 49.12944703463552], [-122.9853047597046, 49.12944319981266], [-122.98532025009857, 49.1294251749018], [-122.98532776322153, 49.12941115409944], [-122.98533009451376, 49.12940714927157], [-122.98533653471102, 49.12938912320816], [-122.98533882745076, 49.12937109661778], [-122.98533742366303, 49.12935306955787], [-122.98533285386038, 49.12933504209579], [-122.9853277891741, 49.12932320312746], [-122.98532556797801, 49.12931701428828], [-122.98531611173307, 49.12929898620426], [-122.9853040100167, 49.1292809577827], [-122.98530033317633, 49.129276306518236], [-122.98529073429337, 49.129262929210256], [-122.98527289373617, 49.12924490005408], [-122.9852728726475, 49.12924488283851], [-122.9852499170222, 49.129226870239044], [-122.98524540899993, 49.129224086412506], [-122.98521794372256, 49.129208849421566], [-122.9852179239225, 49.12920883926537], [-122.98519047787089, 49.129195597276336], [-122.98517932681854, 49.12919080743526], [-122.98516301166313, 49.12918358739292], [-122.98513720743503, 49.12917277513883], [-122.98513554534087, 49.12917200499603], [-122.98510807969163, 49.12915821813204], [-122.9851014194725, 49.129154743644136], [-122.98508061447185, 49.129143050611845], [-122.98506926334468, 49.12913671260801], [-122.98505314946003, 49.12912724717942], [-122.9850374920655, 49.129118681612724], [-122.98502568431607, 49.12911194047094], [-122.98500321678175, 49.12910065028344], [-122.98499821877499, 49.12909800596671], [-122.98497075290256, 49.129085218746006], [-122.98496390188882, 49.12908261828775], [-122.98494328658967, 49.12907393266255], [-122.98491581959577, 49.129064932617226], [-122.98491447017324, 49.12906458495719], [-122.98488835237622, 49.12905670766996], [-122.98486088443197, 49.129050892907806], [-122.98483341583764, 49.129047230426984], [-122.98482113407269, 49.12904654584187], [-122.98480594666121, 49.129045486093254]]]}}, {"id": "0", "type": "Feature", "properties": {"r": 0.5, "r_true": 0.5003786956964477, "Contour_Level": "50 % Flux Source Area Contour"}, "geometry": {"type": "Polygon", "coordinates": [[[-122.98486083688509, 49.12920705674904], [-122.9848407422697, 49.12920879035922], [-122.98483336641073, 49.12920927504236], [-122.9848058949456, 49.129214727694034], [-122.98477842169979, 49.12922597736874], [-122.98477690510445, 49.12922680884212], [-122.98475094695002, 49.12924209057874], [-122.98474716335552, 49.1292448317989], [-122.9847254984882, 49.12926285581677], [-122.98472347010159, 49.129264976657346], [-122.98470768175248, 49.12928088034027], [-122.98469598988422, 49.129298726327185], [-122.98469585058676, 49.1292989056545], [-122.98468544534843, 49.129316931156595], [-122.9846813782812, 49.129334957498806], [-122.98468319351457, 49.1293529846213], [-122.9846894608549, 49.129371012334204], [-122.98469596498283, 49.12937963114179], [-122.98470267109951, 49.12938904096675], [-122.98472342760478, 49.12940329756006], [-122.98473026760271, 49.129407071501255], [-122.98475089364852, 49.12941589165083], [-122.9847783615139, 49.12942258074029], [-122.98480583073953, 49.12942484250915], [-122.98483330090143, 49.129424043143125], [-122.98486077250655, 49.12941850068758], [-122.98488407203095, 49.129407091739786], [-122.98488824699348, 49.12940345597176], [-122.98490325183958, 49.12940709424922], [-122.98491571500497, 49.12940970165984], [-122.98494318089813, 49.12942296558099], [-122.98495817998955, 49.12942512829967], [-122.98497064931901, 49.12942791532347], [-122.9849981196407, 49.12942658315089], [-122.98500519265099, 49.12942513441483], [-122.98502559117311, 49.12942122571887], [-122.98505306432963, 49.12941044586854], [-122.98505936356027, 49.1294071145559], [-122.98508054035763, 49.12939005645643], [-122.98508163911961, 49.129389090554746], [-122.9850947292996, 49.12937106536381], [-122.98509957300529, 49.12935303910738], [-122.9850989840874, 49.12933501214971], [-122.98509324220518, 49.129316984526795], [-122.98508131282864, 49.12929895610421], [-122.98508056790948, 49.12929823285355], [-122.9850629508448, 49.12928092684832], [-122.98505310520808, 49.129274458321966], [-122.98503386480789, 49.12926289619987], [-122.98502564025839, 49.12925823661443], [-122.98500066611216, 49.12924486500984], [-122.98499817488303, 49.129243485066034], [-122.98497070915259, 49.129229962228656], [-122.98496183940571, 49.12922683307729], [-122.98494324259707, 49.12921921348516], [-122.98491577490574, 49.12921224786372], [-122.98488830615406, 49.12920879659434], [-122.98488830615406, 49.12920879659434], [-122.98486083688509, 49.12920705674904]]]}}]}
    
    var EC_Station = {"type": "FeatureCollection", "features": [{"id": "1", "type": "Feature", "properties": {"name": "BB", "Zm": 1.8, "lat": 49.129344, "lon": -122.984902, "canopy_height": 0.3}, "geometry": {"type": "Point", "coordinates": [-122.984902, 49.129344]}}]}

    map.on('load', () => {
        // Add a data sources containing GeoJSON data.

        // Add a data source containing GeoJSON data.
        map.addSource('Site_Name', {
            'type': 'geojson',
            'data': {"type": "FeatureCollection", "features": [{"id": "1", "type": "Feature", "properties": {"name": "BB", "Zm": 1.8, "lat": 49.129344, "lon": -122.984902, "canopy_height": 0.3}, "geometry": {"type": "Point", "coordinates": [-122.984902, 49.129344]}}]}
        });

        map.addSource('FP_Contour_Levels', {
            'type': 'geojson',
            'data': FP_Contour_Levels
        });

        // Add a new layer to visualize the polygon.
        map.addLayer({
            'id': 'FP_Contour_Levels',
            'type': 'fill',
            'source': 'FP_Contour_Levels', // reference the data source
            'layout': {},
            'paint': {
                'fill-color': '#f76605', // blue color fill
                'fill-opacity': 0.15
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'outline',
            'type': 'line',
            'source': 'FP_Contour_Levels',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 3
                }
            });

        
        map.addLayer({'id': 'Site_Name',
                'type': 'circle',
                'source': 'Site_Name',
                'filter': ['==', '$type', 'Point'],
                'paint': {
                    'circle-radius': 10,
                    'circle-color': '#9803fc',
                    "circle-stroke-width": 1,
                    "circle-stroke-color": 'black'
                    },
                });

    });

    map.on('click', 'FP_Contour_Levels', (e) => {
        new mapboxgl.Popup()
            .setLngLat(e.lngLat)
            .setHTML(e.features[0].properties.Contour_Level)
            .addTo(map);
        });

        
    let bbox = turf.extent(FP_Contour_Levels);
    
    // fit zom to the bounding box of whichever layers are loaded
    function fit() {
        map.fitBounds(bbox, {maxZoom: 18});
        };

    fit();

    map.addControl(new mapboxgl.ScaleControl({position: 'bottom-right'}));
    
    // Call fit when clicking the zoomto button
    document.getElementById('zoomto').addEventListener('click', () => {
        fit()
    });
</script>

</body>
</html>